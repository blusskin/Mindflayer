version: '3.8'

services:
  orange-nethack:
    build: .
    ports:
      - "8000:8000"   # API
      - "2222:22"     # SSH (using 2222 to avoid conflicts)
    volumes:
      # Persist database between restarts
      - orange-nethack-data:/var/lib/orange-nethack
      # Persist game logs
      - orange-nethack-games:/var/games/nethack
    env_file:
      - .env
    environment:
      # These override .env values if needed
      - HOST=0.0.0.0
      - DATABASE_PATH=/var/lib/orange-nethack/db.sqlite
      - XLOGFILE_PATH=/var/games/nethack/xlogfile
    restart: unless-stopped

volumes:
  orange-nethack-data:
  orange-nethack-games:
