version: '3.8'

services:
  orange-nethack:
    build: .
    ports:
      - "8000:8000"   # API
      - "2222:22"     # SSH (using 2222 to avoid conflicts)
    volumes:
      # Persist database between restarts
      - orange-nethack-data:/var/lib/orange-nethack
      # Persist game logs
      - orange-nethack-games:/var/games/nethack
    environment:
      - MOCK_LIGHTNING=false
      - STRIKE_API_KEY=223C74016B00C72E7E2788F0CB552AF2B773CBCC9A1954F61F7AC994DD69EEB4
    restart: unless-stopped

volumes:
  orange-nethack-data:
  orange-nethack-games:
